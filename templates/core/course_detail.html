{% extends 'base.html' %}
{% load static %}
{% load core_tags %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>{{ course.title }}</h1>
    <p class="text-muted">–ö–æ–¥: {{ course.code }} | –û–±–Ω–æ–≤–ª–µ–Ω: {{ course.time_update|date:"d.m.Y" }}</p>
    <hr>

    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title">üìã –û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞</h4>
                    <p class="card-text">{{ course.description|linebreaks }}</p>
                </div>
            </div>

            <div class="card mt-4">
                <div class="card-body">
                    <h4 class="card-title">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å –∏ –¥–µ—Ç–∞–ª–∏</h4>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            –¶–µ–Ω–∞ –∫—É—Ä—Å–∞
                            <span class="badge bg-primary rounded-pill fs-6">
                                {% format_price course.price %}
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            –°—Ç–∞—Ç—É—Å
                            <span class="badge {% if course.is_published %}bg-success{% else %}bg-warning{% endif %} rounded-pill">
                                {% if course.is_published %}‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω{% else %}‚è≥ –ß–µ—Ä–Ω–æ–≤–∏–∫{% endif %}
                            </span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
                            <span>{{ course.time_create|date:"d.m.Y H:i" }}</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
                            <span>{{ course.time_update|date:"d.m.Y H:i" }}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">üöÄ –î–µ–π—Å—Ç–≤–∏—è</h5>
                    <div class="d-grid gap-2">
                        <a href="{% url 'home' %}" class="btn btn-outline-primary">
                            ‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é
                        </a>
                        <a href="/admin/core/course/{{ course.id }}/change/"
                           class="btn btn-outline-secondary"
                           target="_blank">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å (–∞–¥–º–∏–Ω–∫–∞)
                        </a>
                    </div>
                </div>
            </div>

            <div class="card mt-3">
                <div class="card-body">
                    <h5 class="card-title">üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –∫—É—Ä—Å</h5>
                    <div class="input-group">
                        <input type="text"
                               class="form-control"
                               value="{{ request.scheme }}://{{ request.get_host }}{{ course.get_absolute_url }}"
                               readonly
                               id="course-url">
                        <button class="btn btn-outline-secondary"
                                type="button"
                                onclick="copyUrl()"
                                title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É">
                            üìã
                        </button>
                    </div>
                    <small class="text-muted">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∫—É—Ä—Å–∞</small>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function copyUrl() {
    const input = document.getElementById('course-url');
    input.select();
    document.execCommand('copy');
    const btn = event.target;
    btn.textContent = '‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
    setTimeout(() => btn.textContent = 'üìã', 2000);
}
</script>

<style>
.card {
    border-radius: 10px;
    margin-bottom: 1rem;
    border: 1px solid #e0e0e0;
}
.card-title {
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
    padding-bottom: 0.5rem;
    margin-bottom: 1rem;
}
.list-group-item {
    border: none;
    padding: 0.75rem 0;
}
</style>
{% endblock %}